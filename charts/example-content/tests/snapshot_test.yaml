suite: snapshot
chart:
  appVersion: "1.0.0"
tests:
  - it: matches the snapshot
    values:
      - ../test-values.yaml
    asserts:
      - matchSnapshot: {}
  - it: matches the snapshot (internalUrl)
    values:
      - ../test-values.yaml
    set:
      contentConfigurations.ui.internalUrl: http://example-content:8000/ui/assets/config.json
    asserts:
      - matchSnapshot: {}
  - it: has all health checks
    template: deploy.yaml
    asserts:
      - equal:
          path: spec.template.spec.containers[0].livenessProbe.httpGet.path
          value: /healthz
      - equal:
          path: spec.template.spec.containers[0].readinessProbe.httpGet.path
          value: /readyz
      - equal:
          path: spec.template.spec.containers[0].startupProbe.httpGet.path
          value: /readyz
