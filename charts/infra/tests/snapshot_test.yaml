suite: snapshot
values:
  - ../test-values.yaml
tests:
  - it: matches the snapshot
    asserts:
      - matchSnapshot: {}
  - it: disables externalsecrets
    set:
      externalSecrets:
        accountOperatorSaKubeconfig: null
    asserts:
      - matchSnapshot: {}
  - it: with kcp
    set:
      kcp:
        enabled: true
      istio:
        passThrough:
          gateway:
            enabled: true
            hosts:
              - "passthrough.my-domain.com"
            port: 8000
            name: pass-https
            protocol: HTTPS

    asserts:
      - matchSnapshot: {}

